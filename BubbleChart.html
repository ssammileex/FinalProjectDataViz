<!DOCTYPE html>

<script src="https://d3js.org/d3.v4.min.js"></script>

<html>
<body>
  <script>
    var diameter = 500;

    var color = d3.scaleOrdinal(d3.schemeCategory20c);

    var bubble = d3.pack()

                    .size([diameter, diameter])
                    .padding(1.5);
    d3.csv("us-crime.csv", function(error, data){

      data = data.map(function(d){d.value = +d["Total"]; return d;});

      var nodes = bubble.nodes({children:data}).filter(function(d){ return !d.children;});

      var bubbles = svg.append("g")
                        .attr("transform", "translate(0,0)")
                        .selectAll(".bubble")
                        .data(nodes)
                        .enter();

      bubbles.append("circle")
              .attr("r", function(d){ return d.r;})
              .attr("cx", function(d){ return d.x;})
              .attr("cy", function(d){ return d.y;})
              .style("fill", function(d){ return color(d.value);});

      bubbles.append("text")
              .attr("x", function(d){ return d.x;})
              .attr("y", function(d){ return d.y + 5;})
              .attr("text-anchor","middle")
              .text(function(d){ return d["State"];})
              .style({ "fill":"white",
                        "font-size":"12px"});
    });


  </script>
</body>
</html>
